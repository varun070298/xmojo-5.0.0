<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Testing_the_agent</title>

  <meta http-equiv="content-type"
 content="text/html; charset=ISO-8859-1">

  <link rel="STYLESHEET" href="../styles/xmojo.css">
</head>
<body>
<table cellpadding="2" cellspacing="2" border="0" width="100%"
 class="HDR_TABLE">
    <tbody>
      <tr>
        <td valign="top" align="center" rowspan="1" colspan="3"><font
 class="HDR_TITLE">The&nbsp;XMOJO&nbsp;Project</font></td>
      </tr>
      <tr>
        <td valign="top" align="left" class="HDR_TDLeft"><a
 href="agent_creation.html" class="HDR_LINK">&lt;&lt;&nbsp;Prev</a></td>
        <td valign="top" align="center" class="HDR_TDCenter"><font
 class="HDR_CHAPTER">7.&nbsp;Running and Testing the JMX Agent</font></td>
        <td valign="top" align="right" class="HDR_TDRight"><br>
      </td>
      </tr>

  </tbody>
</table>
<br>
<h2>&nbsp;Running and Testing the Agent&nbsp;</h2>
<h3>&nbsp;For Windows OS&nbsp;</h3>
<ol>
  <li>Change your working directory to <i>%XMOJO_HOME%</i>/tutorials directory.</li>
  <li>Execute the build.bat (This batch file compiles the Java files under
the src directory and the output class files will be stored in the classes
directory.)</li>
  <li>Execute the run.bat&nbsp; (This batch file executes the RunNotifAgent
class.)</li>
</ol>
The JMX Agent will be started. &nbsp;RMI Server will be started at port 1099.
&nbsp;HTML Server will be started at port 8030. &nbsp;For testing the example,
refer to the section, "Testing the Agent" given below.
<h3>&nbsp;For Unix OS&nbsp;</h3>
<ol>
  <li>Change your working directory to <i>$XMOJO_HOME</i>/tutorials directory.</li>
  <li>Execute the build.sh (This script file compiles the Java files under
the src directory and the output class files will be stored in the classes
directory.)</li>
  <li>Execute the run.sh&nbsp; (This script file executes the RunNotifAgent
class.)</li>
</ol>
The JMX Agent will be started. &nbsp;RMI Server will be started at port 1099.
&nbsp;HTML Server will be started at port 8030. &nbsp;For testing the example,
refer&nbsp;to the section, "Testing the Agent" given below:
<h2>&nbsp;Testing the Agent&nbsp;</h2>
<h3>&nbsp;Using the RMI Client&nbsp;</h3>
Start the MBeanBrowser tool by executing the mbeanbrowser.bat/mbeanbrowser.sh
file under <i>XMOJO_HOME</i>/bin directory.<br>
Connect to the RMI Server. &nbsp;(In the menu bar, choose Settings &gt;&gt;
Client Settings. &nbsp;Configure the HostName and PortNumber. Here, HostName
is the machine name where the RMI Server is running. &nbsp;After configuring
the client settings, choose Operations &gt;&gt; Connect). &nbsp;This will
establish a connection with the RMI Server.<br>
<br>
The registered MBeans is listed in the left frame.<br>
<br>
Under the domain ShoppingCart, an MBean with the name type=MBean
is present. &nbsp;Under this MBean node, click <b>Attributes</b>. It lists
three read only attributes. &nbsp;The attributes are TotalItemCount, TotalPrice,
and ItemsPurchased. &nbsp;Click <b>Operations</b>.
&nbsp;Three operations, reset, addItem,
and updateItem, are listed. &nbsp;Invoke the addItem operation passing the
values Parrot and 4. &nbsp;Click OK. &nbsp;Click <b>Attributes</b>. &nbsp;Now,
once again click <b>Attributes</b>. &nbsp;Now, the attributes are
updated with new values. TotalItemCount will be with the value 4 and TotalPrice
will be with the value 80. &nbsp;The ItemsPurchased will display Value Not Obtained.
&nbsp;(This is a limitation in the MBeanBrowser tool.)<br>
<br>
Under the domain InventoryMBean, two MBeans with the names Pet=Parrot and Pet=Fish are listed.
&nbsp;Under the MBean node Pet=Parrot, click <b>Attributes</b>. &nbsp;It lists four read
only attributes. &nbsp;The InventoryLevel and Purchased have the value 16
and 4 respectively. &nbsp;Click <b>Operations</b>. &nbsp;No Operations are listed. &nbsp;
When the InventoryLevel reaches below 6, an operation, increaseStock will be exposed. &nbsp;<br>
<br>
To decrease the InventoryLevel below 6, some more parrots need to be purchased.
&nbsp;For purchasing parrots, either the ShoppingCart application can be used
or the ShoppingCart MBean can be used. &nbsp; In the ShoppingCart application,
choose the Parrot pet and click the <b>Edit</b> button. &nbsp;(If no item
is selected, an error message "Select an item to edit" pops up). &nbsp;Modify
the Quanity value to 12. &nbsp;Click OK. &nbsp;Now, the Quantity added will
be 16. (4 + 12) &nbsp;The inventory level will be decreased to 4 which is
less than six.<br>
<br>
<h3>&nbsp;Using the Web Browser&nbsp;</h3>
Open any Web browser and type the URL http://localhost:8030. &nbsp;If you
are testing from a remote machine, enter the URL http://hostName:8030; here,
hostName is the machine name where the JMX agent is running. &nbsp;If the
HTML Adaptor is listening at some other port, replace the 8030 with the appropriate
port number in the above URL.<br>
<br>
The index page lists the various domains and some useful links for viewing
notifications, searching the MBeans, customizing MBean views, etc.<br>
<br>
Click the ShoppingCart link under Domains. &nbsp;One MBean is listed. &nbsp;Click
the link ShoppingCart:type=MBean. &nbsp;Three readOnly attributes
are listed. &nbsp;The attributes are TotalItemCount, TotalPrice, and ItemsPurchased.
&nbsp;Click the Operations image. &nbsp;Three operations, reset, addItem,
and updateItem, are listed. &nbsp;Invoke the addItem operation passing the
values Parrot and 4. &nbsp;Click the <b>Continue</b> button. &nbsp;Click
the link ShoppingCart:type=MBean. &nbsp;Now, the attributes are
updated with new values. TotalItemCount will be with the value 4 and TotalPrice
will be with the value 80. &nbsp;Click the Home link.<br>
<br>
Click the InventoryMBean link under Domains. &nbsp;Two MBeans are listed.
&nbsp;Click the link InventoryMBean:Pet=Parrot. &nbsp;It lists four read
only attributes. &nbsp;The InventoryLevel and Purchased have the value 16
and 4 respectively. &nbsp;No Operations are listed, i.e, the Operations image
does not exist. &nbsp;When the InventoryLevel reaches below 6, the InventoryMBean
exposes an operation, increaseStock. &nbsp;<br>
<br>
To decrease the InventoryLevel below 6, some more parrots need to be purchased.
&nbsp;For purchasing parrots, either the ShoppingCart application can be used
or the ShoppingCart MBean can be used. &nbsp; In the ShoppingCart application,
choose the Parrot pet and click the <b>Edit</b> button. &nbsp;(If no item
is selected, an error message "Select an item to edit" pops up). &nbsp;Modify
the Quanity value to 12. &nbsp;Click OK. &nbsp;Now, the Quantity added will
be 16. (4 + 12) &nbsp;The inventory level will be decreased to 4 which is
less than six.<br>
<br>
After reducing the inventory level below 6,&nbsp; refresh the HTML page.
Now, the Operations image appears. &nbsp;Click the Operations image. &nbsp;An
operation with the name increaseStock is exposed.<br>
<br>
<table width="100%" border="0" cellspacing="2" cellpadding="2"
 class="FTR_TABLE">
  <tbody>
    <tr>
      <td valign="top" align="left" class="FTR_TDLeft"><a
 href="agent_creation.html" class="HDR_LINK">&lt;&lt;&nbsp;Prev</a></td>
      <td valign="top" align="center" class="FTR_TDCenter"><a
 href="../contents.html" class="HDR_LINK">Home</a></td>
      <td valign="top" align="right" class="FTR_TDRight"><br>
      </td>
    </tr>
    <tr>
      <td valign="top" align="left" class="FTR_TDLeft"><font
 class="FTR_NAV">JMX Agent Creation</font></td>
      <td valign="top" align="center" class="FTR_TDCenter"><br>
      </td>
      <td valign="top" align="right" class="FTR_TDRight"><font
 class="FTR_NAV"></font><br>
      </td>
    </tr>

  </tbody>
</table>
</body>
</html>